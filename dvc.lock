schema: '2.0'
stages:
  data-split:
    cmd: python3 src/data_split.py
    deps:
    - path: data/raw_data/clean_data.csv
      md5: b20c8cf632976544627b454eec4569cd
      size: 333768
    - path: src/data_split.py
      md5: d87f245593aebcea75023220c0f1cd7e
      size: 1059
    params:
      params.yaml:
        data-split.seed: 42
        data-split.split: 0.2
    outs:
    - path: data/processed_data/x_test.npy
      md5: 2d112d60d739d98a1c38f2ecaa3a575c
      size: 23424
    - path: data/processed_data/x_train.npy
      md5: 084fe9b3d0ddd59d73acf1c26fad3055
      size: 93120
    - path: data/processed_data/y_test.npy
      md5: c9df630695a5479df6e10a053d80f1b8
      size: 3040
    - path: data/processed_data/y_train.npy
      md5: 75253d33076ed9bc5211e9ec8b6f22d7
      size: 11752
  normalize:
    cmd: python3 src/normalize.py
    deps:
    - path: data/processed_data/x_test.npy
      md5: 2d112d60d739d98a1c38f2ecaa3a575c
      size: 23424
    - path: data/processed_data/x_train.npy
      md5: 084fe9b3d0ddd59d73acf1c26fad3055
      size: 93120
    - path: src/normalize.py
      md5: f16613f9b3084439cd4ba310db24d95d
      size: 731
    outs:
    - path: data/scaling_model.pkl
      md5: c9dee1bc1761b14c472e6b107ba8eba1
      size: 728
  training:
    cmd: python3 src/training.py
    deps:
    - path: data/processed_data/x_train.npy
      md5: 084fe9b3d0ddd59d73acf1c26fad3055
      size: 93120
    - path: data/processed_data/y_train.npy
      md5: 75253d33076ed9bc5211e9ec8b6f22d7
      size: 11752
    - path: data/scaling_model.pkl
      md5: c9dee1bc1761b14c472e6b107ba8eba1
      size: 728
    - path: src/training.py
      md5: 0f4569babb912f8f4fc65b96a5b7d1f1
      size: 1932
    params:
      params.yaml:
        training.lr: 0.01
        training.m_depth: 4
        training.min_leaf: 5
        training.min_split: 6
        training.n_est: 100
    outs:
    - path: data/gbrt_model.pkl
      md5: 5bc3bd2c409dfc666ba748640d13c4d8
      size: 216793
    - path: learning_curve.png
      md5: 4d2c99758ed4fe9e66ebb2f76593225d
      size: 92694
  evaluate:
    cmd: python3 src/evaluate.py
    deps:
    - path: data/gbrt_model.pkl
      md5: 5bc3bd2c409dfc666ba748640d13c4d8
      size: 216793
    - path: data/processed_data/x_test.npy
      md5: 2d112d60d739d98a1c38f2ecaa3a575c
      size: 23424
    - path: data/processed_data/y_test.npy
      md5: c9df630695a5479df6e10a053d80f1b8
      size: 3040
    - path: data/scaling_model.pkl
      md5: c9dee1bc1761b14c472e6b107ba8eba1
      size: 728
    - path: src/evaluate.py
      md5: c84fbe566d283899be43e52393cb4e2e
      size: 1358
    outs:
    - path: data/prediction.csv
      md5: 1dff4b35e4eefed5cf5d29389c22a1d2
      size: 13258
    - path: deviance.png
      md5: ae291cf58bce4d84ad09c1255cf4461d
      size: 34882
    - path: feature_importance.png
      md5: 01829713fd7d5ddcea0225f6d1f28c93
      size: 45914
    - path: scores.json
      md5: 9e037c8eb902ebd4dba0adbed6eeef13
      size: 64
